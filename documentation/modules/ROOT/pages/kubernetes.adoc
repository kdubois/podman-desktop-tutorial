= Kubernetes & Podman Desktop
include::_attributes.adoc[]

Kubernetes has emerged as the de facto standard for container orchestration, providing a robust and scalable platform for deploying and managing containerized applications. Podman Desktop seamlessly integrates with Kubernetes, enabling developers to leverage the power of Kubernetes while benefiting from the user-friendly interface and features of Podman Desktop.

== Understanding Kubernetes

https://www.redhat.com/en/topics/containers/what-is-kubernetes[Kubernetes] is an open-source container orchestration system that automates the deployment, scaling, and management of containerized applications. It provides a declarative approach to defining and managing application components, ensuring high availability, scalability, and fault tolerance. Key concepts in Kubernetes include:

1. *Pods*: The smallest deployable unit in Kubernetes, consisting of one or more containers that share network and storage resources.

2. *Services*: An abstraction layer that provides a stable network endpoint for accessing pods, enabling load balancing and service discovery.

3. *Deployments*: A higher-level abstraction that manages the deployment and scaling of pods, ensuring the desired state of the application is maintained.

4. *ConfigMaps and Secrets*: Objects used to store configuration data and sensitive information, respectively, which can be injected into pods as environment variables or mounted as files.

image::kubernetes-diagram-concepts.png[Podman Desktop Registries Settings, 600]

Kubernetes follows a declarative model, where users define the desired state of their application using YAML or JSON manifests. The Kubernetes control plane, consisting of components like the API server, scheduler, and controller manager, continuously works to ensure the actual state matches the desired state.

image::kubernetes-diagram.png[Podman Desktop Registries Settings, 600]

////
=== Running Kubernetes Objects with Podman Desktop

While Kubernetes provides a powerful platform for container orchestration, it can be complex to set up and manage, especially for developers new to Kubernetes. For those looking to work and interact with Kubernetes objects, Podman Desktop allows you to directly run and manage objects such as Pods and Deployments, directly from the *Pods* section of the interface. Select *Play Kubernetes YAML* to get started.

image::podman-desktop-kubernetes-objects.png[Podman Desktop Kubernetes Objects, 600]

Here, we'll need to select a Kubernetes YAML file to run. For example, let's run a simple `nginx-deployment.yaml` It creates a ReplicaSet to bring up three nginx Pods. 

[.console-output]
[source,bash,subs="+macros,+attributes"]
----
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
  labels:
    app: nginx
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.14.2
        ports:
        - containerPort: 80
----

Back in Podman Desktop, first, select *Browse*.

image::podman-desktop-kubernetes-play-yaml.png[Podman Desktop Play Kubernetes YAML, 600]

From the *Home* directory, navigate to `podman-desktop-demo/pods/nginx-deployment.yaml` and click *Select* or double click. 

image::podman-desktop-kubernetes-select-yaml.png[Podman Desktop Select Kubernetes YAML, 600]

Now, you can hit *Play* from Podman Desktop to create the necessary resources within the Podman engine.

image::podman-desktop-kubernetes-play-yaml-button.png[Podman Desktop Play Kubernetes YAML Button, 600]
////

== Integrating Kubernetes with Podman Desktop

As mentioned, Podman Desktop provides a seamless integration with Kubernetes, starting from the setup of a local Kubernetes cluster to deploying and managing applications on Kubernetes. Let's take a look at how easy it is to spin up, and connect, to a Kubernetes cluster using Podman Desktop.

=== Provisioning a Kubernetes Cluster

NOTE: During this workshop, we'll be directly connecting to a remote Kubernetes cluster. This information is just as a reference for later use.

Podman Desktop includes extensions to manage local Kubernetes clusters, enabling developers to deploy and test their applications in a Kubernetes environment without the need for external setup. The local cluster is powered by https://kind.sigs.k8s.io/[KinD (Kubernetes in Docker)] or https://minikube.sigs.k8s.io/[Minikube], providing a lightweight and isolated Kubernetes environment. To start a local KinD cluster in Podman Desktop:

Navigate to the *Settings* section in Podman Desktop and select *Create new Kind cluster*.

image::podman-desktop-settings-kind.png[Podman Desktop Settings, 600]

You'll view Kind cluster settings here such as a name, port assignment (for forwarding your applications), and Kubernetes version. Choose the desired container engine provider (Podman or Docker) and click the *Create* button.

image::podman-desktop-kubernetes-settings.png[Podman Desktop Kubernetes Settings, 600]

Podman Desktop will spin up the local Kubernetes cluster, and you can verify your connection from the *Pods* section of the interface, or at the bottom-left of the screen, where you can switch between different Kubernetes contexts.

image::podman-desktop-kubernetes-cluster.png[Podman Desktop Kubernetes Cluster, 600]

You can also follow a similar path in order to provision and connect to a Minikube cluster. In order to work with your local container images, simply load them into the cluster using through the kebab menu in the *Images* section.

image::podman-desktop-images-load-into-cluster.png[Podman Desktop Load Images into Cluster, 600]

=== Connecting to a Remote Kubernetes Cluster

Let's take a look, however, at how to connect to a remote Kubernetes cluster. 

=== Managing Kubernetes Resources

Podman Desktop provides a centralized interface for managing Kubernetes resources, including pods, services, deployments, and more. You can view and interact with Kubernetes objects directly from the Podman Desktop interface.

The *Kubernetes* section in Podman Desktop displays an overview of the cluster, including the number of nodes, pods, and services. You can drill down into specific namespaces and view the details of individual resources.

image::podman-desktop-kubernetes-overview.png[Podman Desktop Kubernetes Overview, 600]

Podman Desktop also integrates with the Kubernetes CLI (`kubectl`), allowing you to run commands and perform advanced operations directly from the terminal within the Podman Desktop interface.


== Next Steps

Now that you have a solid understanding of Kubernetes and its integration with Podman Desktop, you're ready to dive deeper into deploying and managing applications on Kubernetes. In the next section, we'll explore advanced topics such as configuring services, scaling deployments, and monitoring application health using Podman Desktop's Kubernetes features.